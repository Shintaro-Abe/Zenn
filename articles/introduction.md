---
title: "IT未経験者がAWSを触る前におさえておきたい、ネットワークの初歩"
emoji: "👀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["aws", "network" ]
published: false
---

:::message
未経験からIT業界への転職など、AWSを勉強する前に知っておきたいネットワークについて、概要をまとめました。
私自身が一番最初に勉強した内容になります。
:::

# クライアントとサーバ

| 用語 | 意味 |
| --- | --- |
| クライアント | 発信側。リクエストをサーバに対して実施。 |
| サーバ | 受信側。クライアントからのリクエストに対して、レスポンスをクライアントへ実施。  |

ITの世界ではクライアントとサーバのやり取りが行われており、リクエストとレスポンスに様々な情報を含む。

#名前解決とIPアドレス
Q.クライアントがリクエストを送る際、どうやってサーバの場所を特定しているのか？
A. **IPアドレス** でサーバの場所を特定。

__IPアドレスの例：13.113.33.112__
IPアドレスのままだとサーバの場所が分かってしまうため、ドメインを使用する必要がある。

__ドメインの例：terakoya.sejuku.net__

| 用語  | 意味 |
| --- | --- |
| 名前解決  | ドメインをIPアドレスへ変換すること。<br>名前解決をするサーバが、地域ごとに通信を振り分けたり通信先のヘルスチェックを行うことで、信頼性の高い通信が可能。 |

# IPアドレスの仕組み
IPアドレスは、xxx.xxx.xxx.xxxの形をとり、xxx単位をオクテットとし、
左から第1オクテット、第2オクテット、第3オクテット、第4オクテットと呼ぶ。
各オクテットには２進法を元に算出された0〜255までの数字が入るため、IPアドレスの数は256個。
オクテットが４つあることにより256の4乗となり、IPアドレスの総数は4,294,967,296個。

# IPアドレスとネットワーク

| 用語  | 意味 |
| --- | --- |
| ネットワーク  | 全世界にあるIPアドレスの集合体。|

ネットワークの種類に、外部からアクセスが可能なパブリックネットワークと外部からのアクセスができないプライベートネットワーク、ローカルネットワークがある。

# サブネットマスク
| 用語  | 意味 |
| --- | --- |
| サブネットマスク | 使用できるIPアドレスの数を定義。<br>172.16.0.0/16といった形式で表記。 |

VPCで使用するIPアドレスの範囲を指定したり、VPCの中からサブネットとして使用するIPアドレスの範囲をCIDRブロックとして指定する際に使用。

 **/16はオクテットの数をどこまで固定するのかを指定。** 
各オクテットを最大の数に設定すると、IPアドレスは255.255.255.255
2進数で表すと、合計32桁の数字で成り立つ。

| IPアドレス  | 2進数|
| --- | --- |
| 255.255.255.255  | 11111111.11111111.11111111.11111111  |

/16は2進数表記の左側から16桁まで固定するため、残りの16桁をIPアドレスとして使用可能。
オクテットは8桁の数字で成り立つため、/16は第3と第4オクテットをIPアドレスとして使用可能。

AWSではVPC、サブネット、セキュリティグループなどを設定するのに必要。

 **使用できるIPアドレス数** 

| /16  | /17 | /18  | /19 | /20  | /21 | /22  | /23 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 65,536  | 32,768  |16,384  | 8,192  |4,096  | 2,048  |1,024  | 512  |

| /24  | /25 | /26  | /27 | /28  | /29 | /30  | /31 | /32 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 256  | 128  | 64 |  32 | 16 |  8 |  4 |  2 |  1 |

1桁は0か1のため、/24より少ない数のサブネットマスクは計算しやすい。

【計算例】
/23は/24に比べて使用できる範囲が1桁多いため、0と1の分である256x2=512個のIPアドレスを使用可能。

# プロトコルとポート番号

| 用語  | 意味 |
| --- | --- |
| プロトコル  | 通信の手段、ルール。何の通信なのかを識別。  |
| ポート番号 | 通信する際、サーバにあるプログラムを指定する番号。 |

プロトコルとポート番号を指定しないと通信が成立しない。
ポート番号は6万近くあるが、プロトコルによってデフォルトの番号があり、プログラムに設定されている。

AWSではセキュリティグループで通信を許可するプロトコル、ポート番号を指定。

**【ポート番号例】**

| プロトコル  | ポート番号 |
| --- | --- |
| ssh  | 22  |
| SMTP  | 25  |
| DNS  | 53  |
| HTTP  | 80  |
| HTTPS  | 443  |

# 名前解決

| 用語  | 意味 |
| --- | --- |
| Domain Name System(通称DNS)  | 名前解決をする仕組み。|

ドメインは世界に多数存在しているため、役割が異なる複数のサーバで管理。管理サーバをDNSサーバと呼ぶ。
役割の異なるDNSサーバを経由して照会することにより、IPアドレスがクライアントへ届く仕組み。
ドメインのパーツによって、DNSサーバを識別。

 **sejuku.netの場合** 

| セカンドドメイン  | トップドメイン |
| --- | --- |
| sejuku  | .net  |

 **名前解決の流れ** 
クライアント
↓
ルートDNSサーバ(.netを照会)
↓
.netのDNSサーバ(sejuku.netを照会)
↓
sejuku.netのDNSサーバ(IPアドレスを照会)
↓
クライアント

クライアントが受け取るIPアドレスはキャッシュDNSサーバに保管。次回以降はキャッシュDNSサーバからIPアドレスを得ることによりより速く通信可能。合わせてルートDNSサーバの負荷を低減。

AWSのDNSサーバはRoute53。

# まとめ
ネットワークと通信の仕組みについて学習。
今回の内容はインフラの構築、セキュリティ対策の基本であり、トラブルが起きた際の原因を調査する上でも欠かせない知識。
複雑なネットワークに対応すべく、基礎的な知識と実践をしっかりと身につける必要がある。